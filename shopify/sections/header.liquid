{% comment %}
  Header section - Converted from React Header component
  Supports mobile menu, RTL layout, and customizable navigation
{% endcomment %}

<header class="site-header fixed top-0 right-0 left-0 z-50 py-3 sm:py-4 md:py-6 px-4 sm:px-6 md:px-12 bg-background/90 backdrop-blur-md border-b border-border" dir="rtl">
  <nav class="flex items-center justify-between max-w-6xl mx-auto">
    
    {%- comment -%} Mobile Layout {%- endcomment -%}
    <div class="flex md:hidden items-center justify-between w-full">
      {%- comment -%} Left Icons - Shopping & User {%- endcomment -%}
      <div class="flex items-center gap-3">
        <a href="{{ section.settings.product_link | default: '/pages/product' }}" aria-label="{{ section.settings.product_label | default: 'ערכת האימון' }}">
          <svg class="w-5 h-5 text-foreground/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
          </svg>
        </a>
        {% if customer %}
          <a href="/account" aria-label="אזור אישי">
            <svg class="w-5 h-5 text-foreground/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </a>
        {% else %}
          <a href="/account/login" aria-label="כניסה">
            <svg class="w-5 h-5 text-foreground/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
          </a>
        {% endif %}
      </div>
      
      {%- comment -%} Center Logo {%- endcomment -%}
      <a href="/" class="absolute left-1/2 transform -translate-x-1/2">
        {% if section.settings.logo != blank %}
          {{ section.settings.logo | image_url: width: 120 | image_tag: class: 'h-5', alt: shop.name }}
        {% else %}
          <span class="text-lg font-bold">{{ shop.name }}</span>
        {% endif %}
      </a>
      
      {%- comment -%} Right Icons - Search & Menu {%- endcomment -%}
      <div class="flex items-center gap-3">
        <button type="button" aria-label="חיפוש" class="p-1 search-toggle">
          <svg class="w-5 h-5 text-foreground/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
        </button>
        <button type="button" class="p-1 mobile-menu-toggle" aria-label="פתח תפריט">
          <svg class="w-5 h-5 menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg class="w-5 h-5 close-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>

    {%- comment -%} Desktop Layout {%- endcomment -%}
    <a href="/" class="hidden md:block">
      {% if section.settings.logo != blank %}
        {{ section.settings.logo | image_url: width: 150 | image_tag: class: 'h-5 md:h-6', alt: shop.name, style: 'width: auto; min-width: 100px;' }}
      {% else %}
        <span class="text-lg font-bold">{{ shop.name }}</span>
      {% endif %}
    </a>

    {%- comment -%} Desktop Navigation {%- endcomment -%}
    <div class="hidden md:flex items-center gap-6">
      {% for link in section.settings.menu.links %}
        <a href="{{ link.url }}" class="text-sm font-normal text-foreground/70 hover:text-foreground transition-colors">
          {{ link.title }}
        </a>
      {% endfor %}
      
      {% if customer %}
        <a href="/account" class="flex items-center gap-2 text-sm font-normal text-foreground/70 hover:text-foreground transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          <span>אזור אישי</span>
        </a>
      {% else %}
        <a href="/account/login" class="flex items-center gap-2 text-sm font-normal text-foreground/70 hover:text-foreground transition-colors">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          <span>כניסה</span>
        </a>
      {% endif %}
    </div>
  </nav>

  {%- comment -%} Mobile Menu {%- endcomment -%}
  <div class="mobile-menu md:hidden absolute top-full left-0 right-0 bg-background border-b border-border shadow-lg hidden">
    <div class="px-4 py-6 space-y-4" dir="rtl">
      {% for link in section.settings.menu.links %}
        <a href="{{ link.url }}" class="block text-base font-normal text-foreground/70 hover:text-foreground transition-colors py-2">
          {{ link.title }}
        </a>
      {% endfor %}
      
      <div class="pt-4 border-t border-border">
        {% if customer %}
          <a href="/account" class="flex items-center gap-2 text-base font-normal text-foreground py-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            <span>אזור אישי</span>
          </a>
        {% else %}
          <a href="/account/login" class="flex items-center gap-2 text-base font-normal text-foreground py-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            <span>כניסה</span>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    const menuIcon = document.querySelector('.menu-icon');
    const closeIcon = document.querySelector('.close-icon');
    
    if (menuToggle) {
      menuToggle.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
        menuIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
      });
    }
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Navigation Menu",
      "default": "main-menu"
    },
    {
      "type": "url",
      "id": "product_link",
      "label": "Product Page Link",
      "default": "/pages/product"
    },
    {
      "type": "text",
      "id": "product_label",
      "label": "Product Link Label",
      "default": "ערכת האימון"
    }
  ]
}
{% endschema %}
